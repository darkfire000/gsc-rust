using Gtk;
using Posix;

Window window;

void bootstrap () {
  var header = new HeaderBar();
  header.set_title("ElementaryOS");
  header.set_subtitle("An app for ElementaryOS");
  header.set_show_close_button(true);

  window = new Window();
  window.window_position = WindowPosition.CENTER;
  window.destroy.connect(main_quit);
  window.set_default_size (0, 250);
  window.set_titlebar(header);
  window.border_width = 2;
  window.destroy.connect (Gtk.main_quit);
}

Button gameButton (string game) {
  var button = new Button();
  button.clicked.connect (() => {
    Posix.system("dosbox " + game);
  });
  return button;
}

int main(string[] args) {
  init(ref args);
  
  bootstrap();
  
  var button1 = new Button.with_label ("Keen 4");
  button1.clicked.connect (() => {
    Posix.system("dosbox");
  });

  var button2 = new Button.with_label ("Duke 2");
  button2.clicked.connect (() => {
      button2.label = "Thank you";
  });

  var button3 = new Button.with_label ("Click me!");
  button3.clicked.connect (() => {
      button3.label = "Thank you";
  });
  
  var myButton = gameButton("keen");
  myButton.label = "Keen";

	Gtk.Box box = new Gtk.Box (Gtk.Orientation.HORIZONTAL, 4);
	box.pack_start (myButton, false, false, 2);
	box.pack_start (button2, false, false, 2);
	box.pack_start (button3, false, false, 2);
	window.add (box);


  window.show_all ();

  Gtk.main();
  return 0;
}
